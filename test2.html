<!DOCTYPE html>

<html lang="ja">
	<head>
		<meta charset="utf-8">
		<title>jQuery-Validation-Plugin Bootstrap 連携サンプル</title>
		<link
			href="http://netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
			rel="stylesheet">
		<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
		<script
			src="http://netdna.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

		<link rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/jQuery-Validation-Engine/2.6.4/validationEngine.jquery.min.css">
	</head>

		<!-- <form action="" method="post" id="form1" name="send">

			<label>お名前をご入力ください。
				<input type="text" name="name" class="input1 validate[required]">
			</label>
		</p>
		<p>

			<label>メールアドレスをご入力ください。

				<input type="email" name="email"
					class="input3 validate[required,custom[email]] mail-address">
			</label>
		</p>
			<input type="image" alt="送信" src class="btn" id="send_button" disabled="">
		</form> -->


<body>
    <div id="ty_header"></div>
        <!-- Page Content -->
        <div class="container">
            <div class="row">
                <h4>お気軽にお問い合わせください。</h4>
                <div class="col col-md-12">
            <div class="row" >
			<form name="contactform" id="contactform" class="form-horizontal">

			<div class="form-group">
				<label class="control-label col-xs-3">氏名 <span class="label label-danger">必須</span></label>
				<div class="col-xs-9">
					<input type="text" class="form-control validate[required]" placeholder="朗裕 太郎" name="name">
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-xs-3">メールアドレス <span class="label label-danger">必須</span></label>
				<div class="col-xs-9">
					<input type="email" class="form-control validate[required,custom[email]]" placeholder="info@langyutech.jp" name="email">
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-xs-3">会社名前 <span class="label label-danger">必須</span></label>
				<div class="col-xs-9"><input type="text" class="form-control" placeholder="日本朗裕株式会社" name="companyName"></div>
			</div>
			<div class="form-group">
				<label class="control-label col-xs-3">電話番号 </label>
				<div class="col-xs-9"><input type="text" class="form-control validate[custom[phone]]" placeholder="123-4567-8900" name="companyName"></div>
			</div>

			<div class="form-group">
				<label class="control-label col-xs-3">件名 </label>
				<div class="col-xs-9">
					<label class="radio-inline">
						<input type="radio" name="subject" value="bp" id="subject01" onclick="changeDisabled()"> ビジネスパートナーのご依頼について
					</label>
					<label class="radio-inline">
						<input type="radio" name="subject" value="service" id="subject02" onclick="changeDisabled()"> サービスについて
					</label>
					<label class="radio-inline">
						<input type="radio" name="subject" value="recruit" id="subject03" onclick="changeDisabled()"> 採用について
					</label>
					<label class="radio-inline">
						<input type="radio" name="subject" value="other" id="subject04" onclick="changeDisabled()"> その他(下記の件名にご記入ください)
					</label>
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-xs-3"> </label>
				<div class="col-xs-9">
					<input type="text" class="form-control validate[condRequired[subject04]]" placeholder="〇〇について" id="otherContactComent" name="otherContactComent">
				</div>
			</div>

			<div class="form-group">
				<label class="control-label col-xs-3">お問い合わせ内容 <span class="label label-danger">必須</span></label>
				<div class="col-xs-9">
					<textarea placeholder="お問い合わせ内容" rows="10" class="form-control validate[required]" name="message"></textarea>
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-xs-3">個人情報の取り扱いについて </label>
				<div class="col-xs-9">
					<textarea placeholder="お問い合わせ内容" rows="10" class="form-control validate[required]" name="message" readonly>
個人情報の取扱いについて（お問い合わせフォーム）

(１) 事業者の名称 日本朗裕株式会社

(２) 個人情報保護管理者の氏名又は職名、所属及び連絡先
個人情報保護管理者：常務執行役員 銭 立
メール：info@langyutech.jp ＴＥＬ：03-6429-7162

(３) 個人情報の利用目的 ・お問い合わせ、資料請求に対応するするため。弊社サービスのご案内のため

(４) 個人情報の第三者提供について
取得した個人情報は法令等による場合を除いて第三者に提供することはありません。

(５) 個人情報の取扱いの委託について
取得した個人情報の取扱いの全部又は、一部を委託することがあります。
委託に際しては、個人情報の取扱いについて当社水準と同等かそれ以上の安全を担保できる事業者を選定します。

(６) 必要な個人情報を提供いただけない場合に生じる結果
お問い合わせに必要な個人情報をご提供いただけない場合は、お問い合わせ内容に回答出来ない場合があります。

(７) 開示対象個人情報の開示等および問い合わせ窓口について
ご本人からの請求により、当社が保有する開示対象個人情報に関する開示、利用目的の通知、内容の訂正・追加または削除、
利用停止、消去および第三者提供の停止、第三者提供記録の開示に応じます。
ご連絡窓口は、下記「当社の個人情報の取扱いに関する苦情、相談等の問合せ先」を参照してください。

(８) 本人が容易に認識できない方法による個人情報の取得
クッキーやウェブビーコン等を用いるなどして、本人が容易に認識できない方法による個人情報の取得は行っておりません。

(９) 個人情報の安全管理措置について
取得した個人情報については、漏洩、減失またはき損の防止と是正、その他個人情報の安全管理のために必要かつ適切な措置を講じます。
お問い合わせおいて取得した個人情報は、当社内において保管期間を定め、保管期間経過後は削除又は破棄いたします。

(１０) 個人情報保護方針 当社ホームページの個人情報保護方針をご覧下さい。

(１１) 当社の個人情報の取扱いに関する苦情、相談等の問合せ先
【個人情報お問い合わせ窓口】
窓口責任者：個人情報保護管理者 住 所：〒101-0032 東京都千代田区岩本町2-7-13
渡辺ビル3階 ＴＥＬ：03-6429-7162 メール：info@langyutech.jp
				</textarea>
				<input class="form-check-input" type="checkbox" value="" id="flexCheckIndeterminate" required>
				<label class="form-check-label" for="flexCheckIndeterminate">
					同意する<span class="label label-danger">必須</span>
				</label>
			</div>
			<div class="form-group">
				<div class="col-sm-offset-6 col-sm-6">
					<button type="button" id="btnSend" class="btn btn-primary btn-lg">送信</button>
				</div>
			</div>

			<!-- <button type="button" id="btnSend" class="btn btn-primary btn-lg btn-block">送信</button> -->
	</div>
	<!-- <iframe id="inquireForm" src="https://sgfm.jp/f/c0050aade1b61e18701d25431eab3eb8" width="100%" height="800" frameborder="0" style="border:0"></iframe> -->
	<hr>
</div>

	<script src="https://cdn.jsdelivr.net/gh/posabsolute/jQuery-Validation-Engine@3.1.0/js/jquery.validationEngine.min.js"></script>
	<script src="https://cdn.jsdelivr.net/gh/posabsolute/jQuery-Validation-Engine@3.1.0/js/languages/jquery.validationEngine-ja.js"></script>

	<script>
		function changeDisabled() {
			if ( document.contactform["subject"][3].checked ) {
				document.contactform["otherContactComent"].disabled = false;
			} else {
				document.contactform["otherContactComent"].disabled = true;
			}
		}
		window.onload = changeDisabled;

		$(document).ready(function () {
			$("#contactform").validationEngine('attach', {
				promptPosition: "bottomLeft" //アラートの吹き出しを左下に設定
			});
		});
		$(function () {
			$("#btnSend").on("click", function () {
				if ($("#contactform").validationEngine("validate")) {
					alert("testok");
					$("#btnSend").prop("disabled", true);
						// フォームのデータをJSONに変換
						var rawData = $('#contactform').serializeArray();
						var data = {};
						jQuery.each(rawData, function(i, e) {
							data[e.name] = e.value;
						});
						// Ajaxを使ってメールを送信
						$.ajax({
							type: "POST",
							url: "http://localhost:8080/sendmail",
							dataType: "json",
							data: JSON.stringify(data),
							contentType: 'application/json',
							scriptCharset: 'utf-8',
							success: function(outdata, dataType) {
								if (outdata[0] == "OK") 
								$('#sampleModal').modal();
								$("#btnSend").prop("disabled", false);
							},
							error: function(XMLHttpRequest, textStatus, errorThrown) {
								$("#btnSend").prop("disabled", false);
							}
					});
				}
			});

		});

		</script>

		<!-- モーダル・ダイアログ -->
		<div class="modal fade" id="sampleModal" tabindex="-1">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"><span>✕</span></button>
						<h4 class="modal-title">問い合わせ完了</h4>
					</div>
					<div class="modal-body">
						問い合わせありがとうございました。 
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary" data-dismiss="modal">閉じる</button>
					</div>
				</div>
			</div>
		</div>


	</body>

</html>